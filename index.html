<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒˆ è‰²å½©é²œè‰³çš„æ•°æ®å¯è§†åŒ–</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4, #45B7D1, #96CEB4, #FFEAA7, #DDA0DD, #98D8C8, #FFD93D);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* åŠ¨æ€èƒŒæ™¯è£…é¥° */
        .bg-decoration {
            position: fixed;
            border-radius: 50%;
            filter: blur(40px);
            opacity: 0.7;
            animation: float 20s infinite ease-in-out;
            pointer-events: none;
        }

        .bg-decoration:nth-child(1) {
            width: 300px;
            height: 300px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            top: -150px;
            right: -150px;
            animation-delay: 0s;
        }

        .bg-decoration:nth-child(2) {
            width: 250px;
            height: 250px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            bottom: -125px;
            left: -125px;
            animation-delay: 3s;
        }

        .bg-decoration:nth-child(3) {
            width: 200px;
            height: 200px;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            top: 50%;
            left: -100px;
            animation-delay: 6s;
        }

        .bg-decoration:nth-child(4) {
            width: 350px;
            height: 350px;
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            top: 20%;
            right: -175px;
            animation-delay: 9s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            33% { transform: translateY(-30px) rotate(120deg); }
            66% { transform: translateY(30px) rotate(240deg); }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        header {
            text-align: center;
            margin-bottom: 50px;
            animation: slideDown 1s ease-out;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            font-size: 4em;
            margin-bottom: 15px;
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4, #45B7D1, #96CEB4, #FFEAA7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 30px rgba(255,255,255,0.3);
            animation: textGlow 3s ease-in-out infinite;
        }

        @keyframes textGlow {
            0%, 100% { filter: brightness(1) drop-shadow(0 0 20px rgba(255,255,255,0.5)); }
            50% { filter: brightness(1.2) drop-shadow(0 0 30px rgba(255,255,255,0.8)); }
        }

        .subtitle {
            color: white;
            font-size: 1.4em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            margin-bottom: 10px;
        }

        .navigation {
            text-align: center;
            margin-bottom: 40px;
        }

        .nav-btn {
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            padding: 12px 25px;
            margin: 0 8px;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
            font-weight: 600;
            position: relative;
            overflow: hidden;
        }

        .nav-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .nav-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .nav-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            background: rgba(255,255,255,0.3);
        }

        .nav-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-color: transparent;
            color: white;
            transform: scale(1.05);
        }

        .section {
            display: none;
            animation: fadeIn 0.6s ease-out;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .chart-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .chart-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.85) 100%);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
            border: 2px solid rgba(255,255,255,0.2);
        }

        .chart-card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4, #45B7D1, #96CEB4, #FFEAA7);
            border-radius: 25px;
            opacity: 0;
            z-index: -1;
            transition: opacity 0.3s ease;
            background-size: 400% 400%;
            animation: gradientShift 10s ease infinite;
        }

        .chart-card:hover::before {
            opacity: 1;
        }

        .chart-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 30px 60px rgba(0,0,0,0.2);
        }

        .chart-title {
            font-size: 1.6em;
            font-weight: 700;
            margin-bottom: 20px;
            text-align: center;
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4, #45B7D1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
        }

        .chart-title::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: linear-gradient(90deg, #FF6B6B, #4ECDC4, #45B7D1);
            border-radius: 2px;
        }

        .chart-container {
            position: relative;
            height: 400px;
            margin-bottom: 20px;
            border-radius: 15px;
            overflow: hidden;
            background: rgba(255,255,255,0.5);
            padding: 10px;
        }

        .chart-description {
            color: #555;
            line-height: 1.6;
            text-align: center;
            font-size: 0.95em;
            font-style: italic;
        }

        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
            color: #667eea;
            font-size: 1.2em;
        }

        .status-message {
            text-align: center;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 20px;
            font-weight: 600;
            backdrop-filter: blur(10px);
        }

        .status-success {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            color: white;
        }

        .status-loading {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .status-error {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        @media (max-width: 768px) {
            .chart-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            h1 {
                font-size: 2.5em;
            }
            
            .chart-card {
                padding: 20px;
            }
            
            .nav-btn {
                padding: 10px 18px;
                margin: 5px;
                font-size: 14px;
            }
        }

        /* é¢å¤–çš„è§†è§‰æ•ˆæœ */
        .sparkle {
            position: fixed;
            pointer-events: none;
            animation: sparkle 3s linear;
            z-index: 9999;
        }

        @keyframes sparkle {
            0% {
                opacity: 0;
                transform: translateY(0) scale(0);
            }
            10% {
                opacity: 1;
            }
            100% {
                opacity: 0;
                transform: translateY(-100vh) scale(1);
            }
        }
    </style>
</head>
<body>
    <!-- åŠ¨æ€èƒŒæ™¯è£…é¥° -->
    <div class="bg-decoration"></div>
    <div class="bg-decoration"></div>
    <div class="bg-decoration"></div>
    <div class="bg-decoration"></div>

    <div class="container">
        <header>
            <h1>ğŸŒˆ è‰²å½©é²œè‰³çš„æ•°æ®å¯è§†åŒ–</h1>
            <p class="subtitle">åŸºäºç¬¬5ç« MatplotlibæŠ€æœ¯çš„ç»šä¸½å±•ç¤º</p>
        </header>

        <div id="chartLoadStatus" class="status-message status-loading">
            âœ¨ æ­£åœ¨åŠ è½½ç‚«å½©å›¾è¡¨åº“...
        </div>

        <nav class="navigation">
            <button class="nav-btn active" onclick="showSection('products')">ğŸ“Š äº§å“é”€å”®é¢</button>
            <button class="nav-btn" onclick="showSection('pets')">ğŸ±ğŸ¶ å…»å® æ¯”ä¾‹</button>
            <button class="nav-btn" onclick="showSection('douyin')">ğŸ“± æŠ–éŸ³ç”¨æˆ·</button>
            <button class="nav-btn" onclick="showSection('weather')">ğŸŒ¤ï¸ æ°”è±¡æ•°æ®</button>
        </nav>

        <section id="products" class="section active">
            <div class="chart-grid">
                <div class="chart-card">
                    <h3 class="chart-title">ğŸ“ˆ äº§å“Aä¸äº§å“Bæœˆåº¦é”€å”®é¢è¶‹åŠ¿</h3>
                    <div class="chart-container">
                        <canvas id="productLineChart"></canvas>
                    </div>
                    <p class="chart-description">ğŸ¯ å±•ç¤ºäº§å“Aå’Œäº§å“Båœ¨12ä¸ªæœˆå†…çš„é”€å”®é¢å˜åŒ–è¶‹åŠ¿ï¼Œä¾¿äºæ¯”è¾ƒä¸¤è€…çš„é”€å”®è¡¨ç°</p>
                </div>
                <div class="chart-card">
                    <h3 class="chart-title">ğŸ¨ äº§å“Aå¹´åº¦é”€å”®é¢åˆ†å¸ƒ</h3>
                    <div class="chart-container">
                        <canvas id="productAPieChart"></canvas>
                    </div>
                    <p class="chart-description">ğŸŒˆ äº§å“Aå„æœˆä»½é”€å”®é¢å æ¯”åˆ†æï¼Œäº†è§£é”€å”®çš„å­£èŠ‚æ€§åˆ†å¸ƒç‰¹å¾</p>
                </div>
                <div class="chart-card">
                    <h3 class="chart-title">ğŸª äº§å“Bå¹´åº¦é”€å”®é¢åˆ†å¸ƒ</h3>
                    <div class="chart-container">
                        <canvas id="productBPieChart"></canvas>
                    </div>
                    <p class="chart-description">ğŸ­ äº§å“Bå„æœˆä»½é”€å”®é¢å æ¯”åˆ†æï¼Œè§‚å¯Ÿå…¶é”€å”®æ¨¡å¼ä¸äº§å“Açš„å·®å¼‚</p>
                </div>
            </div>
        </section>

        <section id="pets" class="section">
            <div class="chart-grid">
                <div class="chart-card">
                    <h3 class="chart-title">ğŸ± éƒ¨åˆ†å›½å®¶å…»çŒ«äººç¾¤æ¯”ä¾‹</h3>
                    <div class="chart-container">
                        <canvas id="catBarChart"></canvas>
                    </div>
                    <p class="chart-description">ğŸŒ å…¨çƒ12ä¸ªå›½å®¶å’Œåœ°åŒºå…»çŒ«äººç¾¤çš„æ¯”ä¾‹å¯¹æ¯”ï¼Œåæ˜ ä¸åŒåœ°åŒºçš„å® ç‰©åå¥½</p>
                </div>
                <div class="chart-card">
                    <h3 class="chart-title">ğŸ¶ éƒ¨åˆ†å›½å®¶å…»ç‹—äººç¾¤æ¯”ä¾‹</h3>
                    <div class="chart-container">
                        <canvas id="dogBarChart"></canvas>
                    </div>
                    <p class="chart-description">ğŸ˜ï¸ å…¨çƒ12ä¸ªå›½å®¶å’Œåœ°åŒºå…»ç‹—äººç¾¤çš„æ¯”ä¾‹å¯¹æ¯”ï¼Œå±•ç°å…»å® æ–‡åŒ–çš„åœ°åŸŸå·®å¼‚</p>
                </div>
            </div>
        </section>

        <section id="douyin" class="section">
            <div class="chart-grid">
                <div class="chart-card">
                    <h3 class="chart-title">ğŸš€ æŠ–éŸ³2018vs2017äººç¾¤å¢é•¿å€æ•°</h3>
                    <div class="chart-container">
                        <canvas id="douyinGrowthChart"></canvas>
                    </div>
                    <p class="chart-description">ğŸ“ˆ æŠ–éŸ³ä¸åŒåŸå¸‚çº§åˆ«ç”¨æˆ·å¢é•¿å€æ•°å¯¹æ¯”ï¼Œæ˜¾ç¤ºå¹³å°åœ¨å„çº¿åŸå¸‚çš„å¿«é€Ÿå‘å±•</p>
                </div>
                <div class="chart-card">
                    <h3 class="chart-title">ğŸŒ† 2017å¹´æŠ–éŸ³ç”¨æˆ·åœ°åŒºåˆ†å¸ƒ</h3>
                    <div class="chart-container">
                        <canvas id="douyin2017Chart"></canvas>
                    </div>
                    <p class="chart-description">ğŸ™ï¸ 2017å¹´æŠ–éŸ³ç”¨æˆ·åœ°åŸŸåˆ†å¸ƒæƒ…å†µï¼Œåæ˜ æ—©æœŸç”¨æˆ·ä¸»è¦é›†ä¸­åœ¨ä¸€çº¿åŸå¸‚</p>
                </div>
                <div class="chart-card">
                    <h3 class="chart-title">ğŸŒ 2018å¹´æŠ–éŸ³ç”¨æˆ·åœ°åŒºåˆ†å¸ƒ</h3>
                    <div class="chart-container">
                        <canvas id="douyin2018Chart"></canvas>
                    </div>
                    <p class="chart-description">ğŸŒƒ 2018å¹´æŠ–éŸ³ç”¨æˆ·åœ°åŸŸåˆ†å¸ƒå˜åŒ–ï¼Œæ˜¾ç¤ºç”¨æˆ·å‘äºŒä¸‰çº¿åŸå¸‚æ‰©æ•£çš„è¶‹åŠ¿</p>
                </div>
            </div>
        </section>

        <section id="weather" class="section">
            <div class="chart-grid">
                <div class="chart-card">
                    <h3 class="chart-title">ğŸŒ¤ï¸ å…¨å¹´å¹³å‡æ°”æ¸©ä¸é™æ°´é‡ã€è’¸å‘é‡çš„å…³ç³»</h3>
                    <div class="chart-container">
                        <canvas id="weatherChart"></canvas>
                    </div>
                    <p class="chart-description">ğŸŒˆ å±•ç¤ºå…¨å¹´12ä¸ªæœˆçš„æ°”æ¸©å˜åŒ–ä¸é™æ°´é‡ã€è’¸å‘é‡çš„å…³ç³»ï¼Œä½“ç°æ°”å€™çš„å­£èŠ‚æ€§ç‰¹å¾</p>
                </div>
            </div>
        </section>
    </div>

    <script>
        // åˆ›å»ºé—ªçƒæ˜Ÿæ˜Ÿæ•ˆæœ
        function createSparkle() {
            const sparkle = document.createElement('div');
            sparkle.className = 'sparkle';
            sparkle.innerHTML = 'âœ¨';
            sparkle.style.left = Math.random() * window.innerWidth + 'px';
            sparkle.style.top = window.innerHeight + 'px';
            sparkle.style.fontSize = Math.random() * 20 + 10 + 'px';
            document.body.appendChild(sparkle);
            
            setTimeout(() => {
                sparkle.remove();
            }, 3000);
        }

        // å®šæœŸåˆ›å»ºæ˜Ÿæ˜Ÿ
        setInterval(createSparkle, 500);

        // ç­‰å¾…Chart.jsåŠ è½½å®Œæˆ
        function waitForChartJS() {
            const statusDiv = document.getElementById('chartLoadStatus');
            
            if (typeof Chart !== 'undefined') {
                statusDiv.className = 'status-message status-success';
                statusDiv.innerHTML = 'ğŸ‰ ç‚«å½©å›¾è¡¨åº“åŠ è½½æˆåŠŸï¼';
                setTimeout(() => {
                    statusDiv.style.display = 'none';
                    initAllCharts();
                }, 1500);
            } else {
                statusDiv.className = 'status-message status-loading';
                statusDiv.innerHTML = 'âœ¨ æ­£åœ¨åŠ è½½ç‚«å½©å›¾è¡¨åº“ï¼Œè¯·ç¨å€™...';
                setTimeout(waitForChartJS, 500);
            }
        }

        // å…¨å±€é…ç½® - ä½¿ç”¨é²œè‰³çš„é¢œè‰²
        Chart.defaults.font.family = "'Segoe UI', 'Microsoft YaHei', Arial, sans-serif";
        Chart.defaults.color = '#333';
        
        // è‡ªå®šä¹‰é²œè‰³çš„è°ƒè‰²æ¿
        const vibrantColors = {
            primary: ['#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7', '#DDA0DD', '#98D8C8', '#FFD93D'],
            secondary: ['#FF8A80', '#80CBC4', '#81C784', '#FFB74D', '#E1BEE7', '#64B5F6', '#4FC3F7', '#AED581'],
            rainbow: ['#FF0000', '#FF7F00', '#FFFF00', '#00FF00', '#0000FF', '#4B0082', '#9400D3'],
            pastel: ['#FFB3BA', '#FFDFBA', '#FFFFBA', '#BAFFC9', '#BAE1FF', '#E0BBE4', '#FFDFD3', '#C8E6C9']
        };
        
        // æ˜¾ç¤ºä¸åŒçš„section
        function showSection(sectionId) {
            try {
                // éšè—æ‰€æœ‰section
                document.querySelectorAll('.section').forEach(section => {
                    section.classList.remove('active');
                });
                
                // æ˜¾ç¤ºé€‰ä¸­çš„section
                document.getElementById(sectionId).classList.add('active');
                
                // æ›´æ–°å¯¼èˆªæŒ‰é’®çŠ¶æ€
                document.querySelectorAll('.nav-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                event.target.classList.add('active');
                
                // åˆå§‹åŒ–å¯¹åº”çš„å›¾è¡¨
                setTimeout(() => {
                    initCharts(sectionId);
                }, 100);
            } catch (error) {
                console.error('åˆ‡æ¢sectionæ—¶å‡ºé”™:', error);
            }
        }

        // åˆå§‹åŒ–æ‰€æœ‰å›¾è¡¨
        function initAllCharts() {
            try {
                console.log('ğŸ¨ å¼€å§‹åˆå§‹åŒ–ç‚«å½©å›¾è¡¨...');
                initProductCharts();
                initPetCharts();
                initDouyinCharts();
                initWeatherChart();
                console.log('ğŸŒˆ æ‰€æœ‰ç‚«å½©å›¾è¡¨åˆå§‹åŒ–å®Œæˆ');
            } catch (error) {
                console.error('åˆå§‹åŒ–ç‚«å½©å›¾è¡¨æ—¶å‡ºé”™:', error);
                document.getElementById('chartLoadStatus').className = 'status-message status-error';
                document.getElementById('chartLoadStatus').innerHTML = `âŒ ç‚«å½©å›¾è¡¨åˆå§‹åŒ–å¤±è´¥: ${error.message}`;
            }
        }

        // åˆå§‹åŒ–å›¾è¡¨
        function initCharts(sectionId) {
            try {
                console.log(`ğŸ­ åˆå§‹åŒ– ${sectionId} çš„ç‚«å½©å›¾è¡¨...`);
                switch(sectionId) {
                    case 'products':
                        initProductCharts();
                        break;
                    case 'pets':
                        initPetCharts();
                        break;
                    case 'douyin':
                        initDouyinCharts();
                        break;
                    case 'weather':
                        initWeatherChart();
                        break;
                }
            } catch (error) {
                console.error(`åˆå§‹åŒ– ${sectionId} ç‚«å½©å›¾è¡¨æ—¶å‡ºé”™:`, error);
            }
        }

        // äº§å“é”€å”®é¢å›¾è¡¨
        function initProductCharts() {
            const months = ['1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ', '6æœˆ', '7æœˆ', '8æœˆ', '9æœˆ', '10æœˆ', '11æœˆ', '12æœˆ'];
            const productA = [20, 28, 23, 16, 29, 36, 39, 33, 31, 19, 21, 25];
            const productB = [17, 22, 39, 26, 35, 23, 25, 27, 29, 38, 28, 20];

            // çº¿å›¾
            const lineCtx = document.getElementById('productLineChart');
            if (lineCtx && !lineCtx.chart) {
                try {
                    lineCtx.chart = new Chart(lineCtx, {
                        type: 'line',
                        data: {
                            labels: months,
                            datasets: [{
                                label: 'äº§å“A',
                                data: productA,
                                borderColor: vibrantColors.primary[0],
                                backgroundColor: vibrantColors.primary[0] + '33',
                                borderWidth: 3,
                                tension: 0.4,
                                pointBackgroundColor: vibrantColors.primary[0],
                                pointBorderColor: '#fff',
                                pointBorderWidth: 2,
                                pointRadius: 6,
                                pointHoverRadius: 8
                            }, {
                                label: 'äº§å“B',
                                data: productB,
                                borderColor: vibrantColors.primary[1],
                                backgroundColor: vibrantColors.primary[1] + '33',
                                borderWidth: 3,
                                tension: 0.4,
                                pointBackgroundColor: vibrantColors.primary[1],
                                pointBorderColor: '#fff',
                                pointBorderWidth: 2,
                                pointRadius: 6,
                                pointHoverRadius: 8
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'top',
                                    labels: {
                                        padding: 15,
                                        font: { size: 14, weight: 'bold' }
                                    }
                                },
                                tooltip: {
                                    backgroundColor: 'rgba(255,255,255,0.9)',
                                    titleColor: '#333',
                                    bodyColor: '#666',
                                    borderColor: vibrantColors.primary[0],
                                    borderWidth: 2,
                                    cornerRadius: 10,
                                    padding: 12
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    title: {
                                        display: true,
                                        text: 'é”€å”®é¢ (äº¿å…ƒ)',
                                        font: { size: 14, weight: 'bold' }
                                    },
                                    grid: {
                                        color: 'rgba(0,0,0,0.05)'
                                    }
                                },
                                x: {
                                    grid: {
                                        color: 'rgba(0,0,0,0.05)'
                                    }
                                }
                            }
                        }
                    });
                    console.log('ğŸŒŸ äº§å“çº¿å›¾åˆ›å»ºæˆåŠŸ');
                } catch (error) {
                    console.error('åˆ›å»ºäº§å“çº¿å›¾å¤±è´¥:', error);
                }
            }

            // äº§å“Aé¥¼å›¾
            const pieACtx = document.getElementById('productAPieChart');
            if (pieACtx && !pieACtx.chart) {
                try {
                    pieACtx.chart = new Chart(pieACtx, {
                        type: 'doughnut',
                        data: {
                            labels: months,
                            datasets: [{
                                data: productA,
                                backgroundColor: vibrantColors.rainbow,
                                borderColor: '#fff',
                                borderWidth: 2,
                                hoverOffset: 15
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'right',
                                    labels: {
                                        padding: 15,
                                        font: { size: 12 },
                                        usePointStyle: true
                                    }
                                },
                                tooltip: {
                                    backgroundColor: 'rgba(255,255,255,0.9)',
                                    callbacks: {
                                        label: function(context) {
                                            let label = context.label || '';
                                            if (label) {
                                                label += ': ';
                                            }
                                            const sum = context.dataset.data.reduce((a, b) => a + b, 0);
                                            const percentage = ((context.parsed / sum) * 100).toFixed(1);
                                            label += percentage + '%';
                                            return label;
                                        }
                                    }
                                }
                            }
                        }
                    });
                    console.log('ğŸ© äº§å“Aé¥¼å›¾åˆ›å»ºæˆåŠŸ');
                } catch (error) {
                    console.error('åˆ›å»ºäº§å“Aé¥¼å›¾å¤±è´¥:', error);
                }
            }

            // äº§å“Bé¥¼å›¾
            const pieBCtx = document.getElementById('productBPieChart');
            if (pieBCtx && !pieBCtx.chart) {
                try {
                    pieBCtx.chart = new Chart(pieBCtx, {
                        type: 'polarArea',
                        data: {
                            labels: months,
                            datasets: [{
                                data: productB,
                                backgroundColor: vibrantColors.pastel.map(color => color + 'CC'),
                                borderColor: '#fff',
                                borderWidth: 2
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'right',
                                    labels: {
                                        padding: 15,
                                        font: { size: 12 },
                                        usePointStyle: true
                                    }
                                },
                                tooltip: {
                                    callbacks: {
                                        label: function(context) {
                                            let label = context.label || '';
                                            if (label) {
                                                label += ': ';
                                            }
                                            const sum = context.dataset.data.reduce((a, b) => a + b, 0);
                                            const percentage = ((context.parsed / sum) * 100).toFixed(1);
                                            label += percentage + '%';
                                            return label;
                                        }
                                    }
                                }
                            }
                        }
                    });
                    console.log('ğŸª äº§å“Bæåæ ‡å›¾åˆ›å»ºæˆåŠŸ');
                } catch (error) {
                    console.error('åˆ›å»ºäº§å“Bæåæ ‡å›¾å¤±è´¥:', error);
                }
            }
        }

        // å® ç‰©æ¯”ä¾‹å›¾è¡¨
        function initPetCharts() {
            const countries = ['ä¸­å›½', 'åŠ æ‹¿å¤§', 'å·´è¥¿', 'æ¾³å¤§åˆ©äºš', 'æ—¥æœ¬', 'å¢¨è¥¿å“¥', 'ä¿„ç½—æ–¯', 'éŸ©å›½', 'ç‘å£«', 'åœŸè€³å…¶', 'è‹±å›½', 'ç¾å›½'];
            const catData = [19, 33, 28, 29, 14, 24, 57, 6, 26, 15, 27, 39];
            const dogData = [25, 33, 58, 39, 15, 64, 29, 23, 22, 11, 27, 50];

            // çŒ«æ¯”ä¾‹æ°´å¹³æ¡å½¢å›¾
            const catCtx = document.getElementById('catBarChart');
            if (catCtx && !catCtx.chart) {
                try {
                    catCtx.chart = new Chart(catCtx, {
                        type: 'bar',
                        data: {
                            labels: countries,
                            datasets: [{
                                label: 'å…»çŒ«äººç¾¤æ¯”ä¾‹ (%)',
                                data: catData,
                                backgroundColor: vibrantColors.secondary.map((color, index) => 
                                    color + Math.floor(150 - index * 10).toString(16)
                                ),
                                borderColor: vibrantColors.secondary[0],
                                borderWidth: 2,
                                borderRadius: 8,
                                borderSkipped: false
                            }]
                        },
                        options: {
                            indexAxis: 'y',
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: false
                                }
                            },
                            scales: {
                                x: {
                                    beginAtZero: true,
                                    title: {
                                        display: true,
                                        text: 'æ¯”ä¾‹ (%)',
                                        font: { size: 14, weight: 'bold' }
                                    },
                                    grid: {
                                        color: 'rgba(0,0,0,0.05)'
                                    }
                                },
                                y: {
                                    grid: {
                                        display: false
                                    }
                                }
                            }
                        }
                    });
                    console.log('ğŸ± å…»çŒ«å›¾è¡¨åˆ›å»ºæˆåŠŸ');
                } catch (error) {
                    console.error('åˆ›å»ºå…»çŒ«å›¾è¡¨å¤±è´¥:', error);
                }
            }

            // ç‹—æ¯”ä¾‹æ°´å¹³æ¡å½¢å›¾
            const dogCtx = document.getElementById('dogBarChart');
            if (dogCtx && !dogCtx.chart) {
                try {
                    dogCtx.chart = new Chart(dogCtx, {
                        type: 'bar',
                        data: {
                            labels: countries,
                            datasets: [{
                                label: 'å…»ç‹—äººç¾¤æ¯”ä¾‹ (%)',
                                data: dogData,
                                backgroundColor: vibrantColors.primary.map((color, index) => 
                                    color + Math.floor(180 - index * 12).toString(16)
                                ),
                                borderColor: vibrantColors.primary[2],
                                borderWidth: 2,
                                borderRadius: 8,
                                borderSkipped: false
                            }]
                        },
                        options: {
                            indexAxis: 'y',
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: false
                                }
                            },
                            scales: {
                                x: {
                                    beginAtZero: true,
                                    title: {
                                        display: true,
                                        text: 'æ¯”ä¾‹ (%)',
                                        font: { size: 14, weight: 'bold' }
                                    },
                                    grid: {
                                        color: 'rgba(0,0,0,0.05)'
                                    }
                                },
                                y: {
                                    grid: {
                                        display: false
                                    }
                                }
                            }
                        }
                    });
                    console.log('ğŸ¶ å…»ç‹—å›¾è¡¨åˆ›å»ºæˆåŠŸ');
                } catch (error) {
                    console.error('åˆ›å»ºå…»ç‹—å›¾è¡¨å¤±è´¥:', error);
                }
            }
        }

        // æŠ–éŸ³ç”¨æˆ·åˆ†æå›¾è¡¨
        function initDouyinCharts() {
            const cities = ['ä¸€çº¿åŸå¸‚', 'äºŒçº¿åŸå¸‚', 'ä¸‰çº¿åŸå¸‚', 'å››çº¿åŠä»¥å¤–', 'å…¶ä»–å›½å®¶åŠåœ°åŒº'];
            const growthData = [51, 73, 99, 132, 45];
            const data2017 = [21, 35, 22, 19, 3];
            const data2018 = [13, 32, 27, 27, 1];

            // å¢é•¿å€æ•°æŸ±çŠ¶å›¾
            const growthCtx = document.getElementById('douyinGrowthChart');
            if (growthCtx && !growthCtx.chart) {
                try {
                    growthCtx.chart = new Chart(growthCtx, {
                        type: 'bar',
                        data: {
                            labels: cities,
                            datasets: [{
                                label: 'å¢é•¿å€æ•°',
                                data: growthData,
                                backgroundColor: [
                                    vibrantColors.primary[0] + 'CC',
                                    vibrantColors.primary[1] + 'CC',
                                    vibrantColors.primary[2] + 'CC',
                                    vibrantColors.primary[3] + 'CC',
                                    vibrantColors.primary[4] + 'CC'
                                ],
                                borderColor: vibrantColors.primary.map(color => color),
                                borderWidth: 3,
                                borderRadius: 10,
                                borderSkipped: false
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    display: false
                                }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    title: {
                                        display: true,
                                        text: 'å¢é•¿å€æ•°',
                                        font: { size: 14, weight: 'bold' }
                                    },
                                    grid: {
                                        color: 'rgba(0,0,0,0.05)'
                                    }
                                },
                                x: {
                                    grid: {
                                        display: false
                                    }
                                }
                            }
                        }
                    });
                    console.log('ğŸš€ æŠ–éŸ³å¢é•¿å›¾è¡¨åˆ›å»ºæˆåŠŸ');
                } catch (error) {
                    console.error('åˆ›å»ºæŠ–éŸ³å¢é•¿å›¾è¡¨å¤±è´¥:', error);
                }
            }

            // 2017å¹´é¥¼å›¾
            const ctx2017 = document.getElementById('douyin2017Chart');
            if (ctx2017 && !ctx2017.chart) {
                try {
                    ctx2017.chart = new Chart(ctx2017, {
                        type: 'pie',
                        data: {
                            labels: cities,
                            datasets: [{
                                data: data2017,
                                backgroundColor: vibrantColors.rainbow,
                                borderColor: '#fff',
                                borderWidth: 3,
                                hoverOffset: 20
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'right',
                                    labels: {
                                        padding: 15,
                                        font: { size: 12, weight: 'bold' },
                                        usePointStyle: true
                                    }
                                },
                                tooltip: {
                                    callbacks: {
                                        label: function(context) {
                                            let label = context.label || '';
                                            if (label) {
                                                label += ': ';
                                            }
                                            const sum = context.dataset.data.reduce((a, b) => a + b, 0);
                                            const percentage = ((context.parsed / sum) * 100).toFixed(1);
                                            label += percentage + '%';
                                            return label;
                                        }
                                    }
                                }
                            }
                        }
                    });
                    console.log('ğŸ™ï¸ æŠ–éŸ³2017å›¾è¡¨åˆ›å»ºæˆåŠŸ');
                } catch (error) {
                    console.error('åˆ›å»ºæŠ–éŸ³2017å›¾è¡¨å¤±è´¥:', error);
                }
            }

            // 2018å¹´é¥¼å›¾
            const ctx2018 = document.getElementById('douyin2018Chart');
            if (ctx2018 && !ctx2018.chart) {
                try {
                    ctx2018.chart = new Chart(ctx2018, {
                        type: 'pie',
                        data: {
                            labels: cities,
                            datasets: [{
                                data: data2018,
                                backgroundColor: vibrantColors.pastel.map(color => color + 'EE'),
                                borderColor: '#fff',
                                borderWidth: 3,
                                hoverOffset: 20
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'right',
                                    labels: {
                                        padding: 15,
                                        font: { size: 12, weight: 'bold' },
                                        usePointStyle: true
                                    }
                                },
                                tooltip: {
                                    callbacks: {
                                        label: function(context) {
                                            let label = context.label || '';
                                            if (label) {
                                                label += ': ';
                                            }
                                            const sum = context.dataset.data.reduce((a, b) => a + b, 0);
                                            const percentage = ((context.parsed / sum) * 100).toFixed(1);
                                            label += percentage + '%';
                                            return label;
                                        }
                                    }
                                }
                            }
                        }
                    });
                    console.log('ğŸŒƒ æŠ–éŸ³2018å›¾è¡¨åˆ›å»ºæˆåŠŸ');
                } catch (error) {
                    console.error('åˆ›å»ºæŠ–éŸ³2018å›¾è¡¨å¤±è´¥:', error);
                }
            }
        }

        // æ°”è±¡æ•°æ®å›¾è¡¨
        function initWeatherChart() {
            const months = ['1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ', '6æœˆ', '7æœˆ', '8æœˆ', '9æœˆ', '10æœˆ', '11æœˆ', '12æœˆ'];
            const temperature = [2.0, 2.2, 3.3, 4.5, 6.3, 10.2, 20.3, 33.4, 23.0, 16.5, 12.0, 6.2];
            const precipitation = [2.6, 5.9, 9.0, 26.4, 28.7, 70.7, 175.6, 182.2, 48.7, 18.8, 6.0, 2.3];
            const evaporation = [2.0, 4.9, 7.0, 23.2, 25.6, 76.7, 135.6, 162.2, 32.6, 20.0, 6.4, 3.3];

            const weatherCtx = document.getElementById('weatherChart');
            if (weatherCtx && !weatherCtx.chart) {
                try {
                    weatherCtx.chart = new Chart(weatherCtx, {
                        type: 'bar',
                        data: {
                            labels: months,
                            datasets: [
                                {
                                    label: 'è’¸å‘é‡ (ml)',
                                    data: evaporation,
                                    backgroundColor: vibrantColors.primary[4] + 'AA',
                                    borderColor: vibrantColors.primary[4],
                                    borderWidth: 2,
                                    borderRadius: 6,
                                    stack: 'water'
                                },
                                {
                                    label: 'é™æ°´é‡ (ml)',
                                    data: precipitation,
                                    backgroundColor: vibrantColors.primary[1] + 'AA',
                                    borderColor: vibrantColors.primary[1],
                                    borderWidth: 2,
                                    borderRadius: 6,
                                    stack: 'water'
                                },
                                {
                                    label: 'å¹³å‡æ°”æ¸© (Â°C)',
                                    data: temperature,
                                    type: 'line',
                                    borderColor: vibrantColors.primary[0],
                                    backgroundColor: vibrantColors.primary[0] + '33',
                                    borderWidth: 4,
                                    tension: 0.4,
                                    pointBackgroundColor: vibrantColors.primary[0],
                                    pointBorderColor: '#fff',
                                    pointBorderWidth: 2,
                                    pointRadius: 6,
                                    pointHoverRadius: 8,
                                    yAxisID: 'y1'
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: {
                                    position: 'top',
                                    labels: {
                                        padding: 15,
                                        font: { size: 14, weight: 'bold' }
                                    }
                                },
                                tooltip: {
                                    backgroundColor: 'rgba(255,255,255,0.9)',
                                    titleColor: '#333',
                                    bodyColor: '#666',
                                    borderColor: vibrantColors.primary[0],
                                    borderWidth: 2,
                                    cornerRadius: 10,
                                    padding: 12
                                }
                            },
                            scales: {
                                x: {
                                    stacked: true,
                                    title: {
                                        display: true,
                                        text: 'æœˆä»½',
                                        font: { size: 14, weight: 'bold' }
                                    },
                                    grid: {
                                        display: false
                                    }
                                },
                                y: {
                                    stacked: true,
                                    position: 'left',
                                    title: {
                                        display: true,
                                        text: 'æ°´é‡ (ml)',
                                        font: { size: 14, weight: 'bold' }
                                    },
                                    beginAtZero: true,
                                    grid: {
                                        color: 'rgba(0,0,0,0.05)'
                                    }
                                },
                                y1: {
                                    position: 'right',
                                    title: {
                                        display: true,
                                        text: 'æ°”æ¸© (Â°C)',
                                        font: { size: 14, weight: 'bold' }
                                    },
                                    grid: {
                                        drawOnChartArea: false
                                    },
                                    beginAtZero: true
                                }
                            }
                        }
                    });
                    console.log('ğŸŒ¤ï¸ æ°”è±¡å›¾è¡¨åˆ›å»ºæˆåŠŸ');
                } catch (error) {
                    console.error('åˆ›å»ºæ°”è±¡å›¾è¡¨å¤±è´¥:', error);
                }
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆåç­‰å¾…Chart.js
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ¨ é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹ç­‰å¾…ç‚«å½©Chart.js...');
            setTimeout(waitForChartJS, 100);
        });

        // ç›‘å¬é”™è¯¯
        window.addEventListener('error', function(e) {
            console.error('å…¨å±€é”™è¯¯:', e.error);
            const statusDiv = document.getElementById('chartLoadStatus');
            if (statusDiv) {
                statusDiv.className = 'status-message status-error';
                statusDiv.innerHTML = `âŒ ç‚«å½©JavaScripté”™è¯¯: ${e.error.message}`;
            }
        });
    </script>
</body>
</html>